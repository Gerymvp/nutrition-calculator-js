<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Nutrición | Portafolio</title>
    <!-- Favicon: usa una ruta relativa y barras / para que Live Server lo sirva correctamente -->
    <link rel="icon" type="image/png" href="assets/images/lg.png">
    <link rel="shortcut icon" href="assets/images/lg.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/responsive-new.css">
</head>
<body>
    <!-- SVG Filter para efecto eléctrico -->
    <svg class="svg-filter" style="position: absolute; width: 0; height: 0;">
        <defs>
            <filter id="turbulent-displace" colorInterpolationFilters="sRGB" x="-20%" y="-20%" width="140%" height="140%">
                <feTurbulence type="turbulence" baseFrequency="0.02" numOctaves="10" result="noise1" seed="1" />
                <feOffset in="noise1" dx="0" dy="0" result="offsetNoise1">
                    <animate attributeName="dy" values="700; 0" dur="6s" repeatCount="indefinite" calcMode="linear" />
                </feOffset>

                <feTurbulence type="turbulence" baseFrequency="0.02" numOctaves="10" result="noise2" seed="1" />
                <feOffset in="noise2" dx="0" dy="0" result="offsetNoise2">
                    <animate attributeName="dy" values="0; -700" dur="6s" repeatCount="indefinite" calcMode="linear" />
                </feOffset>

                <feTurbulence type="turbulence" baseFrequency="0.02" numOctaves="10" result="noise1" seed="2" />
                <feOffset in="noise1" dx="0" dy="0" result="offsetNoise3">
                    <animate attributeName="dx" values="490; 0" dur="6s" repeatCount="indefinite" calcMode="linear" />
                </feOffset>

                <feTurbulence type="turbulence" baseFrequency="0.02" numOctaves="10" result="noise2" seed="2" />
                <feOffset in="noise2" dx="0" dy="0" result="offsetNoise4">
                    <animate attributeName="dx" values="0; -490" dur="6s" repeatCount="indefinite" calcMode="linear" />
                </feOffset>

                <feComposite in="offsetNoise1" in2="offsetNoise2" result="part1" />
                <feComposite in="offsetNoise3" in2="offsetNoise4" result="part2" />
                <feBlend in="part1" in2="part2" mode="color-dodge" result="combinedNoise" />

                <feDisplacementMap in="SourceGraphic" in2="combinedNoise" scale="30" xChannelSelector="R" yChannelSelector="B" />
            </filter>
            <!-- Filtro estático: genera una distorsión instantánea sin animaciones internas -->
            <filter id="turbulent-static" colorInterpolationFilters="sRGB" x="-20%" y="-20%" width="140%" height="140%">
                <feTurbulence type="turbulence" baseFrequency="0.02" numOctaves="2" seed="10" result="noise" />
                <feDisplacementMap in="SourceGraphic" in2="noise" scale="30" xChannelSelector="R" yChannelSelector="B" />
            </filter>
        </defs>
    </svg>

    <!-- Botón GitHub -->
    <button class="btn-github" id="github-btn" title="Activar/Desactivar Efecto Eléctrico" aria-label="Botón GitHub">G</button>

    <!-- Contenedor principal -->
    <div class="container">
        <header>
            <h1>Calculadora de Nutrición</h1>
            <p class="subtitle">Consulta información nutricional de alimentos</p>
        </header>

        <main class="main-content">
            <!-- Panel de búsqueda -->
            <section class="search-panel electric-card">
                <div class="inner-content">
                    <div class="search-header">
                        <h2>Ingrese</h2>
                        <!-- Botón Limpiar (verde) -->
                        <button type="button" class="btn-clear-form" id="clear-form-btn" title="Limpiar Formulario">
                            <svg class="icon-svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z"></path>
                                <line x1="16" y1="8" x2="2" y2="22"></line>
                                <line x1="17.5" y1="15" x2="9" y2="15"></line>
                            </svg>
                            Limpiar
                        </button>
                    </div>
                    <form id="search-form">
                        <div class="form-group">
                            <label for="food-input">Alimento (ej: 1 taza de avena)</label>
                            <input type="text" id="food-input" placeholder="Nombre del alimento o plato" required>
                        </div>
                        <div class="form-group">
                            <label for="serving-size">Porción en gramos (opcional, por defecto 100g)</label>
                            <input type="number" id="serving-size" placeholder="Ej: 150" min="1" value="100">
                        </div>
                        <div class="form-group">
                            <label for="variant-select">Variante</label>
                            <select id="variant-select">
                                <option value="auto">Auto</option>
                                <option value="raw">Crudo / Raw</option>
                                <option value="cooked">Cocido / Cooked</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary" id="search-btn" disabled>
                            Buscar Información Nutricional
                        </button>
                    </form>
                </div>
                <div class="glow-layer-1"></div>
                <div class="glow-layer-2"></div>
                <div class="overlay-1"></div>
                <div class="overlay-2"></div>
                <div class="background-glow"></div>
            </section>

            <!-- Panel de resultados -->
            <section class="results-panel electric-card">
                <div class="inner-content">
                    <div class="results-header">
                        <h2>Información Nutricional</h2>
                    </div>
                    <div id="results-content">
                        <div class="empty-state">
                            <h3>Consulta información nutricional</h3>
                            <p>Busca un alimento para ver sus valores nutricionales</p>
                        </div>
                    </div>
                    <div id="error-container" style="display: none;"></div>
                </div>
                <div class="glow-layer-1"></div>
                <div class="glow-layer-2"></div>
                <div class="overlay-1"></div>
                <div class="overlay-2"></div>
                <div class="background-glow"></div>
            </section>

            <!-- Panel de historial -->
            <section class="history-panel electric-card">
                <div class="inner-content">
                    <div class="history-header">
                        <h2>Historial de Búsquedas</h2>
                        <!-- Botón Borrar Historial (rojo) -->
                        <button type="button" class="btn-clear" id="clear-history-btn" disabled>
                            <svg class="icon-svg icon-red" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                            </svg>
                            Borrar Historial
                        </button>
                    </div>
                    <div class="history-cards" id="history-cards"></div>
                </div>
                <div class="glow-layer-1"></div>
                <div class="glow-layer-2"></div>
                <div class="overlay-1"></div>
                <div class="overlay-2"></div>
                <div class="background-glow"></div>
            </section>
        </main>

        <footer>
            <p>Desarrollado por Gerizim Berrío</p>
        </footer>
    </div>

    <!-- Modal de confirmación -->
    <div id="confirm-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3>¿Borrar historial?</h3>
            <p>Esta acción eliminará todo tu historial de búsquedas y no se puede deshacer.</p>
            <div class="modal-actions">
                <button type="button" class="btn btn-cancel" id="cancel-clear-btn">Cancelar</button>
                <button type="button" class="btn btn-danger" id="confirm-clear-btn">Sí, borrar</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/api.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/app.js"></script>
    <script src="js/electric-init.js"></script>
</body>
</html>